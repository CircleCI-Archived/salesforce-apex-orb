# Deploy source.
description: >
  'Deploy source data.'
parameters:
  scratch-alias:
    description: 'The alias of the scratch Org.'
    type: string
    default: ''
  checkonly:
    description: "Validate deploy, but don't save to org."
    type: boolean
    default: false
  wait-time:
    description: "Maximum amount of time to complete deployment."
    type: integer
    default: 5
  source-path:
    description: "Comma-seperated list of metadata component names."
    type: string
    default: ""
  manifest:
    description: "File path for manifest file (package.xml) of components to deploy."
    type: string
    default: ""

steps:
  - run:
      name: Deploy Community metadata
      command: sfdx force:source:deploy <<#parameters.scratch-alias>> -u <<parameters.scratch-alias>> <</parameters.scratch-alias>>
        <<#parameters.checkonly>> --checkonly <</parameters.checkonly>>
        <<#parameters.sourcepath>> --sourcepath=<<parameters.sourcepath>> <</parameters.sourcepath>>
        <<#parameters.manifest>> --manifest=<<parameters.manifest>> <</parameters.manifest>>
        -w << parameters.wait-time >>
